<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>장바구니</title>
</head>
<body>
    <table class="tblForm">
        <caption>장바구니 상품</caption>
        <thead>
            <tr>
                <th scope="col">상품명</th>
                <th scope="col">구매가</th>
                <th scope="col">수량</th>
                <th scope="col">금액</th>
                <th scope="col">선택</th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart_items %}
                <tr>
                    <td>{{ item.title }}</td>
                    <td>{{ item.discounted_price }}원</td>
                    <td>
                        <span class="frmAmount">
                            <button type="button" class="minus" onclick="updateCart('{{ item.id }}', -1)">-</button>
                            <input type="text" title="수량 직접입력" name="qty" value="{{ item.quantity }}" readonly>
                            <button type="button" class="plus" onclick="updateCart('{{ item.id }}', 1)">+</button>
                        </span>
                    </td>
                    <td>{{ item.total_price }}원</td>
                    <td>
                        <button type="button" class="btnST" onclick="deleteCartItem('{{ item.id }}')">삭제</button>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <td colspan="5" class="tdTotal">
                    <span class="txt">총 금액</span>
                    <span class="txt">+</span>
                    <span class="txt">배송비</span>
                    <span class="cost"><b>{{ cart_total }}</b>원</span>
                    <span class="txt">=</span>
                    <span class="txt">결제금액</span>
                </td>
            </tr>
        </tfoot>
    </table>
    <div>
        <h2>Cart Items</h2>
        <ul>
          {% for item in request.session.cart %}
            <li>{{ item.product_name }} - ${{ item.price }}</li>
          {% endfor %}
        </ul>
    </div>
</body>
</html>